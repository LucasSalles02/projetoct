{% extends 'core/base.html' %}
{% load static %}

{% block extra_head %}
    <link rel="stylesheet" href="{% static 'materiais/css/formulario.css' %}">
{% endblock extra_head %}

{% block title %}{{ titulo }}{% endblock title %}

{% block page_title %}{{ titulo }}{% endblock %}

{% block content %}

<div class="form-container">
    
    {% if messages %}
    <div class="messages">
        {% for message in messages %}
        <div class="alert alert-{{ message.tags }}">
            {{ message }}
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <div class="form-card">
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            
            <div class="form-group">
                <label for="{{ form.titulo.id_for_label }}" class="required">{{ form.titulo.label }}</label>
                {{ form.titulo }}
                {% if form.titulo.errors %}
                    <span class="error">{{ form.titulo.errors.0 }}</span>
                {% endif %}
            </div>

            <div class="form-group">
                <label for="{{ form.tipo.id_for_label }}" class="required">{{ form.tipo.label }}</label>
                {{ form.tipo }}
                {% if form.tipo.errors %}
                    <span class="error">{{ form.tipo.errors.0 }}</span>
                {% endif %}
            </div>

            <div class="form-group">
                <label for="{{ form.conteudo.id_for_label }}" class="required">{{ form.conteudo.label }}</label>
                {{ form.conteudo }}
                <span class="form-help">Descreva o conteúdo do material de forma clara e objetiva.</span>
                {% if form.conteudo.errors %}
                    <span class="error">{{ form.conteudo.errors.0 }}</span>
                {% endif %}
            </div>

            <div class="form-group">
                <label for="{{ form.imagem.id_for_label }}">{{ form.imagem.label }}</label>
                {{ form.imagem }}
                <span class="form-help">Formatos aceitos: JPG, PNG, GIF. Tamanho máximo: 5MB</span>
                {% if material.imagem %}
                    <div class="image-preview">
                        <img src="{{ material.imagem.url }}" alt="Imagem atual">
                        <p>Imagem atual (envie uma nova para substituir)</p>
                    </div>
                {% endif %}
                {% if form.imagem.errors %}
                    <span class="error">{{ form.imagem.errors.0 }}</span>
                {% endif %}
            </div>

            <div class="form-group-inline">
                <label class="checkbox-label">
                    {{ form.ativo }}
                    <span>{{ form.ativo.label }}</span>
                </label>

                <label class="checkbox-label">
                    {{ form.destaque }}
                    <span>{{ form.destaque.label }} ⭐</span>
                </label>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn-submit">
                    {% if material %}✓ Atualizar Material{% else %}✓ Publicar Material{% endif %}
                </button>
                <a href="{% url 'materiais:lista_materiais_admin' %}" class="btn-cancel">Cancelar</a>
            </div>
        </form>
    </div>

</div>

{% endblock content %}