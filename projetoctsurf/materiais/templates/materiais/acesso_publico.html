{% extends 'core/base.html' %}
{% load static %}

{% block extra_head %}
    <link rel="stylesheet" href="{% static 'materiais/css/materiais.css' %}">
{% endblock extra_head %}

{% block title %}{{ titulo }}{% endblock title %}

{% block page_title %}Acesso Público{% endblock %}

{% block content %}
<div class="materiais-container">
    
    {% if destaques %}
    <section class="destaques-section">
        <h2>Destaques</h2>
        <div class="destaques-grid">
            {% for material in destaques %}
            <div class="destaque-card">
                {% if material.imagem %}
                <div class="destaque-imagem">
                    <img src="{{ material.imagem.url }}" alt="{{ material.titulo }}">
                </div>
                {% endif %}
                <div class="destaque-conteudo">
                    <span class="tipo-badge">{{ material.get_tipo_display }}</span>
                    <h3>{{ material.titulo }}</h3>
                    <p class="data">{{ material.data_publicacao|date:"d/m/Y" }}</p>
                    <p>{{ material.conteudo|truncatewords:30 }}</p>
                    <a href="{% url 'materiais:detalhe_material' material.pk %}" class="btn-ler-mais">Ler mais</a>
                </div>
            </div>
            {% endfor %}
        </div>
    </section>
    {% endif %}

    <section class="filtros-section">
        <h3>Filtrar por tipo:</h3>
        <div class="filtros">
            <a href="{% url 'materiais:acesso_publico' %}" class="filtro-btn {% if not request.GET.tipo %}active{% endif %}">Todos</a>
            <a href="?tipo=noticia" class="filtro-btn {% if request.GET.tipo == 'noticia' %}active{% endif %}">Notícias</a>
            <a href="?tipo=evento" class="filtro-btn {% if request.GET.tipo == 'evento' %}active{% endif %}">Eventos</a>
            <a href="?tipo=dica" class="filtro-btn {% if request.GET.tipo == 'dica' %}active{% endif %}">Dicas</a>
            <a href="?tipo=galeria" class="filtro-btn {% if request.GET.tipo == 'galeria' %}active{% endif %}">Galeria</a>
        </div>
    </section>

    <section class="materiais-lista">
        <div class="materiais-grid">
            {% for material in materiais %}
            <div class="material-card">
                {% if material.imagem %}
                <div class="material-imagem">
                    <img src="{{ material.imagem.url }}" alt="{{ material.titulo }}">
                </div>
                {% endif %}
                <div class="material-conteudo">
                    <span class="tipo-badge tipo-{{ material.tipo }}">{{ material.get_tipo_display }}</span>
                    <h4>{{ material.titulo }}</h4>
                    <p class="data">{{ material.data_publicacao|date:"d/m/Y H:i" }}</p>
                    <p>{{ material.conteudo|truncatewords:20 }}</p>
                    <a href="{% url 'materiais:detalhe_material' material.pk %}" class="btn-ver-mais">Ver mais</a>
                </div>
            </div>
            {% empty %}
            <div class="empty-state">
                <p>Nenhum material publicado ainda.</p>
            </div>
            {% endfor %}
        </div>
    </section>

</div>
{% endblock content %}